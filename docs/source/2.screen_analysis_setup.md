# 2. Installation & Analysis Setup

## Standard Workflow (Recommended)

1. Create your screen analysis repository from the template
    
    Click the green **"Use this template"** button on at [brieflow-analysis](https://github.com/cheeseman-lab/brieflow-analysis) and add it a name like `yourlab-your-screen-analysis`.

2. **Clone the new repository**
   ```bash
   git clone https://github.com/YOUR-USERNAME/YOUR-SCREEN-REPO.git
   cd YOUR-SCREEN-REPO
   ```

3. **Add Brieflow as a git submodule** (use the official repo or your fork if you plan to customise)
   ```bash
   # Official version (most users)
   git submodule add https://github.com/cheeseman-lab/brieflow.git brieflow

   # OR if you have a fork and want to develop/customise
   # git submodule set-url brieflow https://github.com/YOUR-USERNAME/brieflow.git

   git submodule update --init --recursive
   ```

4. **Create and activate a screen-specific conda environment**
   ```bash
   conda create -n brieflow_YOURSCREEN python=3.11 uv pip -y
   conda activate brieflow_YOURSCREEN
   cd brieflow
   uv pip install -r pyproject.toml
   uv pip install -e .
   # optional dependencies
   conda install -c conda-forge micro_sam -y   # only if using micro-sam segmentation
   cd ..
   ```

5. **Verify everything works** (runs on tiny built-in test data, ~10–15 min)
   ```bash
   cd brieflow/tests/small_test_analysis
   python small_test_analysis_setup.py
   bash run_brieflow.sh
   cd ../../..
   pytest   # from inside the brieflow directory
   ```

You are now ready to start configuring and running your screen!  
Proceed to **3. Running Modules** or the individual configuration notebooks in `analysis/`.

### Video Walk-Through

<iframe width="560" height="315" src="https://www.youtube.com/embed/qKhM52VQHNg" frameborder="0" allowfullscreen title="Video: Analysis Setup"></iframe>

**Note:** This video is a little outdated but still shows the general installation and setup processes.

## Developer Workflow (Not Recommended)

If you are contributing new features or fixes back to the core Brieflow codebase:

- First fork both `cheeseman-lab/brieflow` and `cheeseman-lab/brieflow-analysis` (or work in an existing analysis repo).
- Clone your analysis repo as usual.
- Add **your fork** of Brieflow as the submodule (see step 3, second command).
- Create a clean feature branch **inside the `brieflow` submodule** (not in the top-level analysis repo).
- Make changes, test locally with the small test or your own data, then open a PR from your Brieflow fork → `cheeseman-lab/brieflow` main.

Full contribution details are in **4. Development & Contributing**.

You now have a single, always-up-to-date source of truth for installation that will never get out of sync with the GitHub READMEs again!